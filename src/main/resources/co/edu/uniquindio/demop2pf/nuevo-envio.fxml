<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<AnchorPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="co.edu.uniquindio.poo.viewController.NuevoEnvioViewController"
            prefHeight="700.0" prefWidth="800.0" style="-fx-background-color: #f5f5f5;">
    
    <VBox spacing="0" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0"
          AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0">
        
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-background-color: #4CAF50; -fx-padding: 15;">
            <Button text="Volver" onAction="#handleVolver" 
                    style="-fx-background-color: white; -fx-text-fill: #4CAF50; -fx-font-weight: bold;"/>
            <Label text="Crear Nuevo Envio" textFill="WHITE">
                <font>
                    <Font name="System Bold" size="24.0"/>
                </font>
            </Label>
        </HBox>
        
        <!-- Form Container -->
        <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
            <VBox spacing="20.0" style="-fx-padding: 30;">
                
                <!-- InformaciÃ³n del Paquete -->
                <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Informacion del Paquete" style="-fx-text-fill: #4CAF50;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <GridPane hgap="15.0" vgap="15.0">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                        </columnConstraints>
                        
                        <Label text="DescripciÃ³n:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="descripcionField" promptText="Ej: Documentos importantes" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3"/>
                        
                        <Label text="Peso (kg):" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="pesoField" promptText="Ej: 2.5" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        
                        <Label text="Volumen (mÂ³):" GridPane.columnIndex="2" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="volumenField" promptText="Ej: 0.05" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                        
                        <Label text="Valor Declarado:" GridPane.columnIndex="0" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="valorDeclaradoField" promptText="Ej: 50000" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                        
                        <Label text="Tipo de EnvÃ­o:" GridPane.columnIndex="2" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <ComboBox fx:id="tipoEnvioCombo" prefWidth="200.0" 
                                GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>
                
                <!-- DirecciÃ³n de Origen -->
                <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Direccion de Origen" style="-fx-text-fill: #2196F3;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <GridPane hgap="15.0" vgap="15.0">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                        </columnConstraints>
                        
                        <Label text="Calle:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="origenCalleField" promptText="Ej: Calle 10" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3"/>
                        
                        <Label text="Ciudad:" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="origenCiudadField" promptText="Ej: Armenia" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        
                        <Label text="CÃ³digo Postal:" GridPane.columnIndex="2" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="origenCodigoPostalField" promptText="Ej: 630001" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                        
                        <Label text="Latitud:" GridPane.columnIndex="0" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <HBox spacing="5.0" GridPane.columnIndex="1" GridPane.rowIndex="2">
                            <TextField fx:id="origenLatitudField" promptText="Ej: 4.5339" HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ—ºï¸ Mapa" onAction="#handleAbrirMapaOrigen" 
                                    style="-fx-padding: 5 10; -fx-font-size: 11px;"/>
                        </HBox>
                        
                        <Label text="Longitud:" GridPane.columnIndex="2" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="origenLongitudField" promptText="Ej: -75.6811" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>
                
                <!-- DirecciÃ³n de Destino -->
                <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Direccion de Destino" style="-fx-text-fill: #FF9800;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <GridPane hgap="15.0" vgap="15.0">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                        </columnConstraints>
                        
                        <Label text="Calle:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinoCalleField" promptText="Ej: Calle 20" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3"/>
                        
                        <Label text="Ciudad:" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinoCiudadField" promptText="Ej: Pereira" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        
                        <Label text="CÃ³digo Postal:" GridPane.columnIndex="2" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinoCodigoPostalField" promptText="Ej: 660001" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                        
                        <Label text="Latitud:" GridPane.columnIndex="0" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <HBox spacing="5.0" GridPane.columnIndex="1" GridPane.rowIndex="2">
                            <TextField fx:id="destinoLatitudField" promptText="Ej: 4.8133" HBox.hgrow="ALWAYS"/>
                            <Button text="ðŸ—ºï¸ Mapa" onAction="#handleAbrirMapaDestino" 
                                    style="-fx-padding: 5 10; -fx-font-size: 11px;"/>
                        </HBox>
                        
                        <Label text="Longitud:" GridPane.columnIndex="2" GridPane.rowIndex="2">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinoLongitudField" promptText="Ej: -75.6961" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="2"/>
                    </GridPane>
                </VBox>
                
                <!-- InformaciÃ³n de Contacto -->
                <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Informacion del Destinatario" style="-fx-text-fill: #9C27B0;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <GridPane hgap="15.0" vgap="15.0">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="150.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="200.0"/>
                        </columnConstraints>
                        
                        <Label text="Nombre:" GridPane.columnIndex="0" GridPane.rowIndex="0">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinatarioNombreField" promptText="Nombre del destinatario" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="0" GridPane.columnSpan="3"/>
                        
                        <Label text="TelÃ©fono:" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinatarioTelefonoField" promptText="Ej: 3001234567" 
                                 GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        
                        <Label text="Email:" GridPane.columnIndex="2" GridPane.rowIndex="1">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <TextField fx:id="destinatarioEmailField" promptText="email@ejemplo.com" 
                                 GridPane.columnIndex="3" GridPane.rowIndex="1"/>
                    </GridPane>
                </VBox>
                
                <!-- Servicios Adicionales -->
                <VBox spacing="15.0" style="-fx-background-color: white; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Servicios Adicionales" style="-fx-text-fill: #607D8B;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <HBox spacing="30.0">
                        <CheckBox fx:id="seguroCheckBox" text="Seguro del paquete (+10% del valor declarado)">
                            <font><Font size="14.0"/></font>
                        </CheckBox>
                        <CheckBox fx:id="expresCheckBox" text="EnvÃ­o Express (+50% del costo base)">
                            <font><Font size="14.0"/></font>
                        </CheckBox>
                    </HBox>
                </VBox>
                
                <!-- Resumen y Costo -->
                <VBox spacing="15.0" style="-fx-background-color: #E3F2FD; -fx-padding: 20; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 0);">
                    <Label text="Resumen del Envio" style="-fx-text-fill: #1976D2;">
                        <font><Font name="System Bold" size="18.0"/></font>
                    </Label>
                    
                    <HBox spacing="10.0">
                        <Label text="Distancia estimada:">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <Label fx:id="distanciaLabel" text="0 km" style="-fx-text-fill: #1976D2;">
                            <font><Font size="14.0"/></font>
                        </Label>
                    </HBox>
                    
                    <HBox spacing="10.0">
                        <Label text="Costo Base:">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <Label fx:id="costoBaseLabel" text="0" style="-fx-text-fill: #1976D2;">
                            <font><Font size="14.0"/></font>
                        </Label>
                    </HBox>
                    
                    <HBox spacing="10.0">
                        <Label text="Servicios Adicionales:">
                            <font><Font name="System Bold" size="14.0"/></font>
                        </Label>
                        <Label fx:id="costosAdicionalesLabel" text="0" style="-fx-text-fill: #1976D2;">
                            <font><Font size="14.0"/></font>
                        </Label>
                    </HBox>
                    
                    <Separator/>
                    
                    <HBox spacing="10.0">
                        <Label text="COSTO TOTAL:">
                            <font><Font name="System Bold" size="18.0" /></font>
                        </Label>
                        <Label fx:id="costoTotalLabel" text="0" style="-fx-text-fill: #4CAF50;">
                            <font><Font name="System Bold" size="24.0"/></font>
                        </Label>
                    </HBox>
                    
                    <Button text="Calcular Costo" onAction="#handleCalcularCosto" 
                            style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10;">
                        <font><Font name="System Bold" size="14.0"/></font>
                    </Button>
                </VBox>
                
                <!-- Action Buttons -->
                <HBox spacing="15.0" alignment="CENTER" style="-fx-padding: 10 0;">
                    <Button text="Cancelar" onAction="#handleCancelar" 
                            style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 12 40;" 
                            prefWidth="200.0">
                        <font><Font name="System Bold" size="16.0"/></font>
                    </Button>
                    <Button text="Crear EnvÃ­o y Pagar" onAction="#handleCrearEnvio" 
                            style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 16px; -fx-padding: 12 40;" 
                            prefWidth="250.0">
                        <font><Font name="System Bold" size="16.0"/></font>
                    </Button>
                </HBox>
                
            </VBox>
        </ScrollPane>
        
    </VBox>
    
</AnchorPane>
